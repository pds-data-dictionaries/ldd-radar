<?xml version="1.0" encoding="UTF-8"?>
<?xml-model href="http://pds.nasa.gov/pds4/pds/v1/PDS4_PDS_1F00.sch" schematypens="http://purl.oclc.org/dsdl/schematron"?>

<Ingest_LDD 
	xmlns="http://pds.nasa.gov/pds4/pds/v1" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:radar="http://pds.nasa.gov/pds4/radar/v1" 
	xsi:schemaLocation="http://pds.nasa.gov/pds4/pds/v1 https://pds.nasa.gov/pds4/pds/v1/PDS4_PDS_1F00.xsd">
	<name>Radar</name>
    <ldd_version_id>1.0.0.0</ldd_version_id>
    <dictionary_type>Discipline</dictionary_type>
	<full_name>Jesse Stone</full_name>
	<steward_id>sbn</steward_id>
	<namespace_id>radar</namespace_id>
	<comment>PREVIEW VERSION FOR TESTING ONLY. The Radar dictionary contains classes that support radar observations.</comment>
	<last_modification_date_time>2021-09-27T21:30:00.000Z</last_modification_date_time>
    <DD_Attribute>
        <name>range_resolution_distance</name>
        <version_id>1.0</version_id>
        <local_identifier>range_resolution_distance</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Range resolution of products, expressed in units of distance. The minimum separation distance that can be resolved between two closely spaced targets by a radar.</definition>
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Real</value_data_type>
            <minimum_value>0</minimum_value>
            <unit_of_measure_type>Units_of_Length</unit_of_measure_type>
            <specified_unit_id>m</specified_unit_id>
        </DD_Value_Domain>
    </DD_Attribute>

    <DD_Attribute>
        <name>range_resolution_time</name>
        <version_id>1.0</version_id>
        <local_identifier>range_resolution_time</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Range resolution of products, expressed in units of time.  The minimum separation distance that can be resolved between two closely spaced targets by a radar.</definition>
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Real</value_data_type>
            <minimum_value>0</minimum_value>
            <unit_of_measure_type>Units_of_Time</unit_of_measure_type>
            <specified_unit_id>s</specified_unit_id>
        </DD_Value_Domain>
    </DD_Attribute>

    
    <DD_Attribute>
        <name>roundtrip_lighttime</name>
        <version_id>1.0</version_id>
        <local_identifier>roundtrip_lighttime</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>round trip lighttime to target at time of observation</definition>
<!-- How should this be interpretted by bistatic radar (such as Goldstone to VLA, or Arecibo to Green Bank? -->
<!-- JS: Update the name and definition to refer to time from the transmitter to the receiver. This would require a better term than roundtrip. Perhaps total_lighttime? -->
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Real</value_data_type>
            <minimum_value>0</minimum_value>
            <unit_of_measure_type>Units_of_Time</unit_of_measure_type>
            <specified_unit_id>s</specified_unit_id>
        </DD_Value_Domain>
    </DD_Attribute>

    <DD_Attribute>
        <name>matched_snr</name>
        <version_id>1.0</version_id>
        <local_identifier>matched_snr</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>total matched-filter signal-to-noise ratio in one run</definition>
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Real</value_data_type>
            <minimum_value>0</minimum_value>
<!-- Is there a Unit of Measure and a specified unit id? -->
<!-- JS: is this an actual ratio, or a difference in db? -->
        </DD_Value_Domain>
    </DD_Attribute>

    <DD_Attribute>
        <name>range_depth_distance</name>
        <version_id>1.0</version_id>
        <local_identifier>range_depth_distance</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Range depth in units of range_resolution. This is an indicator of observation usefulness for analysis</definition>
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Integer</value_data_type>
            <minimum_value>0</minimum_value>
            <unit_of_measure_type>Units_of_Length</unit_of_measure_type>
            <specified_unit_id>m</specified_unit_id>
        </DD_Value_Domain>
    </DD_Attribute>    

    <DD_Attribute>
        <name>range_depth_time</name>
        <version_id>1.0</version_id>
        <local_identifier>range_depth_time</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Range depth in units of range_resolution. This is an indicator of observation usefulness for analysis</definition>
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Integer</value_data_type>
            <minimum_value>0</minimum_value>
            <unit_of_measure_type>Units_of_Time</unit_of_measure_type>
            <specified_unit_id>s</specified_unit_id>
        </DD_Value_Domain>
    </DD_Attribute>    

    <DD_Attribute>
        <name>tx_power</name>
        <version_id>1.0</version_id>
        <local_identifier>tx_power</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>transmitter power input to antenna</definition>
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Real</value_data_type>
            <minimum_value>0</minimum_value>
            <!--
            <unit_of_measure_type>Units_of_Power</unit_of_measure_type>
            <specified_unit_id>kilowatts</specified_unit_id>
            -->
<!-- the latter should be "watt" so that the attribute can be used for spacecraft radars -->
<!-- JS: ok -->
        </DD_Value_Domain>
    </DD_Attribute>
    
    <DD_Attribute>
        <name>pixel_number</name>
        <version_id>1.0</version_id>
        <local_identifier>pixel_number</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>number of pixels in an image with measurable signal</definition>
<!-- The definition may be OK; but I don't like the name, which suggests an index  -->
<!-- JS: would pixel_count be better? -->
<!-- If this is not nillable, what happens when the product is not an image? -->
<!-- JS: this is not required, so does not have to be nillable -->
        <DD_Value_Domain>
            <enumeration_flag>false</enumeration_flag>
            <value_data_type>ASCII_Integer</value_data_type>
            <minimum_value>0</minimum_value>
        </DD_Value_Domain>
    </DD_Attribute>

    <DD_Attribute>
        <name>observation_purpose</name>
<!-- The permissible values distinguish radar "modes", not purposes of observation -->
<!-- JS: rename element? -->
        <version_id>1.0</version_id>
        <local_identifier>observation_purpose</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Type of radar experiment being performed. Simpler experiments can have higher signal-to-noise or simpler hardware configurations, while more complicated experiments provide more information. ‘Range’ and ‘Total Power’ are mostly historical.</definition>
        <DD_Value_Domain>
            <enumeration_flag>true</enumeration_flag>
            <value_data_type>UTF8_Short_String_Collapsed</value_data_type>
            <DD_Permissible_Value>
                <value>Range-Doppler</value>
                <value_meaning>Transmitted signal is modulated in order to resolve and/or locate the target in range. Received signal is analyzed as a function of Doppler shift in each range bin.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Doppler</value>
                <value_meaning>Received signal is analyzed as a function of Doppler shift with separation by range.</value_meaning>
<!-- I don't understand the definition -->
<!-- JS: refer to M. Nolan to clarify -->
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Range</value>
                <value_meaning>Transmitted signal is modulated in order to resolve and/or local the target in range, but the entire received signal is analyzed without separation by Doppler shift.</value_meaning>
<!-- Could be rewritten for clarity -->
<!-- JS: refer to M. Nolan to clarify -->
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Total Power</value>
                <value_meaning>Only the total echo power is measured, with no separation in range or Doppler shift.</value_meaning>
<!-- Are there such observations?  -->
<!-- JS: refer to M. Nolan to clarify -->
            </DD_Permissible_Value>
        </DD_Value_Domain>
    </DD_Attribute>

    <DD_Attribute>
        <name>power_modulation</name>
<!--  I don't see the need for this attribute; the useful information is in waveform modulation, below -->
<!-- JS: refer to M. Nolan to clarify -->
        <version_id>1.0</version_id>
        <local_identifier>power_modulation</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>On/off modulation (pulsing) of the transmitted power with time to provide range resolution, allow reception of echo in gaps, or cooling of the transmitter. Power modulation other than pulsing should be included in waveform modulation.</definition>
        <DD_Value_Domain>
            <enumeration_flag>true</enumeration_flag>
            <value_data_type>UTF8_Short_String_Collapsed</value_data_type>
            <DD_Permissible_Value>
                <value>Pulsed</value>
                <value_meaning>The transmitter operates for a series of short intervals, typically microseconds or milliseconds, while in operation.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>CW</value>
                <value_meaning>Continuous Wave. Transmitter operates continuously while in operation.</value_meaning>
            </DD_Permissible_Value>
        </DD_Value_Domain>
    </DD_Attribute>

    <DD_Attribute>
        <name>waveform_modulation</name>
<!-- This is really being used in the sense that the transmitted 'pulse' is being modulated -->
<!-- JS: refer to M. Nolan to clarify -->
        <version_id>1.0</version_id>
        <local_identifier>waveform_modulation</local_identifier>
        <nillable_flag>false</nillable_flag>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Additional modulation of the amplitude, phase or frequency of the transmitted signal, usually to provide range resolution. Referred to as “pulse compression” in some literature.</definition>
        <DD_Value_Domain>
            <enumeration_flag>true</enumeration_flag>
            <value_data_type>UTF8_Short_String_Collapsed</value_data_type>
            <DD_Permissible_Value>
                <value>Uncoded</value>
                <value_meaning>No additional modulation beyond a pulse (if present) is applied to the signal in order to encode range information.</value_meaning>
<!-- Modulation does not "encode range information"; it enables extraction of range information from the echo. -->
<!-- But some types of modulation may not enable any range processing; for example, a highway radar gun only provides line-of-sight velocity. -->
<!-- JS: refer to M. Nolan to clarify -->
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Barker BPSK</value>
                <value_meaning>A Barker Binary Phase Shift code is applied, usually to a pulse, to improve range resolution.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Repeating LFSR BPSK</value>
                <value_meaning>A maximal-length Linear Feedback Shift Register code is applied to the transmitted signal using Binary Phase-Shift Keying, in order to resolve the target in range.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Non-repeating BPSK</value>
                <value_meaning>A non-repeating pseudo-random code is applied to the transmitted signal using Binary Phase-Shift Keying in order to resolve the target in range.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Linear Chirp</value>
                <value_meaning>A repeating sawtooth linear frequency ramp is applied to the transmitted signal in order to resolve the target in range.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Other BPSK</value>
                <value_meaning>A code other than those described above is applied to the transmitted signal using Binary Phase-Shift Keying.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Other Chirp</value>
                <value_meaning>A frequency ramp other than described above is applied to the transmitted signal.</value_meaning>
            </DD_Permissible_Value>
            <DD_Permissible_Value>
                <value>Other</value>
                <value_meaning>A modulation beyond a pulse and other than described above is applied to the signal.</value_meaning>
            </DD_Permissible_Value>
        </DD_Value_Domain>
    </DD_Attribute>

    <DD_Class>
        <name>Radar</name>
        <version_id>1.1</version_id>
        <local_identifier>Radar</local_identifier>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>This class is the top level class that contains other radar classes, separated by sub-discipline.</definition>
        <element_flag>true</element_flag>
        <DD_Association>
            <identifier_reference>Groundbased_Radar</identifier_reference>
            <reference_type>component_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
    </DD_Class>

    <DD_Class>
        <name>Groundbased_Radar</name>
        <version_id>1.1</version_id>
        <local_identifier>Groundbased_Radar</local_identifier>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>This class contains attributes that describe metadata pertinent to radar observations / data from Arecibo, Goldstone, and similar installations.</definition>
        <element_flag>false</element_flag>
        <DD_Association>
            <identifier_reference>observation_purpose</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>1</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>Transmitter_Properties</identifier_reference>
            <reference_type>component_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>Modulation</identifier_reference>
            <reference_type>component_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>Quality</identifier_reference>
            <reference_type>component_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>Target_Properties</identifier_reference>
            <reference_type>component_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
    </DD_Class>

    <DD_Class>
        <name>Transmitter_Properties</name>
        <version_id>1.1</version_id>
        <local_identifier>Transmitter_Properties</local_identifier>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Transmitter properties</definition>
        <element_flag>false</element_flag>
        <DD_Association>
            <identifier_reference>range_resolution_time</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>range_resolution_distance</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>tx_power</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>1</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
    </DD_Class>

    <DD_Class>
        <name>Modulation</name>
        <version_id>1.1</version_id>
        <local_identifier>Modulation</local_identifier>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Modulation</definition>
        <element_flag>false</element_flag>
        <DD_Association>
            <identifier_reference>power_modulation</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>waveform_modulation</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
    </DD_Class>
    
    <DD_Class>
        <name>Quality</name>
        <version_id>1.1</version_id>
        <local_identifier>Quality</local_identifier>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Quality</definition>
        <element_flag>false</element_flag>
        <DD_Association>
            <identifier_reference>matched_snr</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>pixel_number</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
    </DD_Class>

    <DD_Class>
        <name>Target_Properties</name>
        <version_id>1.1</version_id>
        <local_identifier>Target_Properties</local_identifier>
        <submitter_name>Jesse Stone</submitter_name>
        <definition>Target Properties</definition>
        <element_flag>false</element_flag>
        <DD_Association>
            <identifier_reference>roundtrip_lighttime</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>range_depth_time</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
        <DD_Association>
            <identifier_reference>range_depth_distance</identifier_reference>
            <reference_type>attribute_of</reference_type>
            <minimum_occurrences>0</minimum_occurrences>
            <maximum_occurrences>1</maximum_occurrences>
        </DD_Association>
    </DD_Class>

    <DD_Rule>
        <local_identifier>range_resolution_and_depth_time</local_identifier>
        <rule_context>//radar:range_depth_time</rule_context>
        <rule_assign>name="range_depth_unit" value="@unit"</rule_assign>
        <DD_Rule_Statement>
            <rule_type>Assert</rule_type>
            <rule_test>//radar:range_resolution_time</rule_test>
            <rule_message>If range_depth_time is specified specified, range_resolution_time must also be specified.</rule_message>
        </DD_Rule_Statement>
        <DD_Rule_Statement>
            <rule_type>Assert</rule_type>
            <rule_test>//radar:range_resolution_time[@unit]==$range_depth_unit</rule_test>
            <rule_message>Unit for range_depth_time unit must match unit for range_resolution_time.</rule_message>
        </DD_Rule_Statement>
    </DD_Rule>

    <DD_Rule>
        <local_identifier>range_resolution_and_depth_distance</local_identifier>
        <rule_context>//radar:range_depth_distance</rule_context>
        <rule_assign>name="range_depth_unit" value="@unit"</rule_assign>
        <DD_Rule_Statement>
            <rule_type>Assert</rule_type>
            <rule_test>//radar:range_resolution_distance</rule_test>
            <rule_message>If range_depth_distance is specified specified, range_resolution_distance must also be specified.</rule_message>
        </DD_Rule_Statement>
        <DD_Rule_Statement>
            <rule_type>Assert</rule_type>
            <rule_test>//radar:range_resolution_distance[@unit]==$range_depth_unit</rule_test>
            <rule_message>Unit for range_depth_distance unit must match unit for range_resolution_distance.</rule_message>
        </DD_Rule_Statement>
    </DD_Rule>

</Ingest_LDD>
